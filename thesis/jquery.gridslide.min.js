/* 
 * Grid Slide
 * Copyright 2011 Justin Volpato - http://jasuten.com
 * Released under the MIT and GPL licenses.
 * Version 1.01
 */
(function($){$.fn.gridslide=function(q){var r=$.extend({shown:8,direction:'random',timeout:2200,speed:2000,viewportClass:'viewport',easing:'linear',viewHeight:parseInt($(this).children().css('height'),0),viewWidth:parseInt($(this).children().css('width'),0)},q);Array.prototype.shuffle=function(){for(var a,tmp,i=this.length;i;a=parseInt(Math.random()*i),tmp=this[--i],this[i]=this[a],this[a]=tmp)};return this.each(function(){var h=[];var j=[];var k=[];var l=$(this).children().length;var m=[];var n=r.direction==='random'?['left','right','top','bottom']:[r.direction];var i=0;var o=this;for(i=0;i<l;i+=1){h[i]=($(this).children().eq(i).attr('slide',i).wrap('<div />').parent().html());j[i]=i}for(i=0;i<r.shown;i+=1){m[i]=i}$(this).empty();j.shuffle();m.shuffle();var p="";for(i=0;i<r.shown;i+=1){p+="<div class='"+r.viewportClass+"'>"+h[j[i]]+"</div>";k[i]=(j[i]+'')}$(this).html(p);function placeExtra(){var v=0;var x;for(x=0;x<l;x+=1){if($.inArray(j[x]+'',k)===-1){if(v===(r.shown)){v=0}$('.'+r.viewportClass+':eq('+m[v]+')',o).append(h[j[x]]);v+=1}}animateViews()}function animateSlide(b){n.shuffle();var c=b.children();var d={};var e=n[0];var f=r.viewWidth;var g=r.viewHeight;function dirSet(a){switch(e){case'top':d[e]=(g*a)+"px";break;case'bottom':d[e]=(g*a)+"px";break;default:d[e]=(f*a)+"px";break}return d}c.css(dirSet(-1));c.eq(0).css({left:'auto',right:'auto',bottom:'auto',top:'auto'});c.eq(0).css(dirSet(0));c.eq(0).animate(dirSet(1),r.speed,r.easing);c.eq(1).animate(dirSet(0),r.speed,r.easing,function(){c.not(':eq(1)').remove()})}function animateViews(){k=[];for(i=0;i<r.shown;i+=1){var a=$('.'+r.viewportClass+':eq('+i+')',o);if(a.children().length>1){animateSlide(a);k[i]=(a.children().eq(1).attr('slide'))}else{k[i]=(a.children().eq(0).attr('slide'))}}}function slidearound(){placeExtra();j.shuffle();m.shuffle();setTimeout(slidearound,(r.timeout+r.speed))}slidearound()})}})(jQuery);